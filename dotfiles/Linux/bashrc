# .bashrc

# Source global definitions
if [ -f /etc/bashrc ]; then
	. /etc/bashrc
fi

# systemctl's auto-paging feature:
# export SYSTEMD_PAGER=

# User specific aliases and functions
if [ -d ~/.bashrc.d ]; then
	for rc in ~/.bashrc.d/*; do
		if [ -f "$rc" ]; then
			. "$rc"
		fi
	done
fi

unset rc

# Compress a history file
# below script could be added to the `cron` for example or executed after each login
function del_duplicates() {
    read -ra SB <<< $(wc -l $HISTFILE)
    awk 'NR==FNR && !/^#/{lines[$0]=FNR;next} lines[$0]==FNR' "$HISTFILE" "$HISTFILE" \
        > "$HISTFILE.compressed" && mv "$HISTFILE.compressed" "$HISTFILE"
    read -ra SA <<< $(wc -l $HISTFILE)
    echo $(( ${SB[0]} - ${SA[0]} )) duplicates removed
}

alias lsofc='lsof -i |grep -Ei "(listen|established)"'
alias clearup="printf '\033[2J'" # clean space above a terminal prompt

# Misc
umask 0077
